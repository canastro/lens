{"version":3,"file":"lens-filter-color.umd.js","sources":["../../../core/dist/lens-core.umd.js","../src/index.js"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(require(\"workerize\")):\"function\"==typeof define&&define.amd?define([\"workerize\"],e):e(t.workerize)}(this,function(a){\"use strict\";function o(t,e){var n=document.createElement(\"canvas\");return n.width=t,n.height=e,n}a=a&&a.hasOwnProperty(\"default\")?a.default:a,exports.getCanvas=o,exports.convertImageDataToCanvasURL=function(t){var e=window.document.createElement(\"canvas\"),n=e.getContext(\"2d\");return e.width=t.width,e.height=t.height,n.putImageData(t,0,0),e.toDataURL()},exports.applyFilter=function(t){var e=t.data,n=t.transform,i=t.options,d=t.nWorkers,h=a(\"\\n        var transform = \"+n+\";\\n\\n        export function execute(canvas, index, length, options) {\\n            canvas.data = transform({ \\n                data: canvas.data, \\n                length: length, \\n                options: options\\n            });\\n\\n            return { result: canvas, index: index };\\n        }\\n    \"),u=o(e.width,e.height),s=u.getContext(\"2d\");s.putImageData(e,0,0),d=d||1;var c=Math.floor(u.height/d);return new Promise(function(e){for(var n=0,t=void 0,a=0;a<d;a++){t=c,a+1===d&&(t=u.height-c*a);var o=s.getImageData(0,c*a,u.width,t),r=t*u.width*4;h.execute(o,a,r,i).then(function(t){s.putImageData(t.result,0,c*t.index),++n===d&&e(s.getImageData(0,0,u.width,u.height))})}})}});\n//# sourceMappingURL=lens-core.umd.js.map\n","import { applyFilter } from 'lens-core';\n\n/**\n * @param {Object} data\n * @param {Number} length\n * @param {Object} options\n * @param {Number} [options.color]\n * @param {Number} [options.level]\n */\nexport const transform = ({ data, length, options }) => {\n    const hex =\n        options.color.charAt(0) === '#'\n            ? options.color.substr(1)\n            : options.color;\n    const colorRGB = {\n        r: parseInt(hex.substr(0, 2), 16),\n        g: parseInt(hex.substr(2, 2), 16),\n        b: parseInt(hex.substr(4, 2), 16)\n    };\n\n    for (let i = 0; i < length; i += 4) {\n        data[i] -= (data[i] - colorRGB.r) * (options.level / 100);\n        data[i + 1] -= (data[i + 1] - colorRGB.g) * (options.level / 100);\n        data[i + 2] -= (data[i + 2] - colorRGB.b) * (options.level / 100);\n    }\n\n    return data;\n};\n\n/**\n * @param {ImageData} data - data of a image extracted from a canvas\n * @param {Object} options - options to pass to the transformation function\n * @param {Number} [options.color] - color value to apply in the transformation\n * @param {Number} [options.level] - level value to apply in the transformation\n * @param {Number} nWorkers - number of workers\n * @returns {Promise}\n */\nexport default function colorize({ data, options, nWorkers } = {}) {\n    if (!data || !options || !options.color || !options.level) {\n        throw new Error('lens-filter-colorize:: invalid options provided');\n    }\n\n    return applyFilter({ data, transform, options, nWorkers });\n}\n"],"names":["a","o","t","e","n","document","createElement","width","height","hasOwnProperty","default","exports","window","getContext","putImageData","toDataURL","data","transform","i","options","d","nWorkers","h","u","s","c","Math","floor","Promise","getImageData","r","execute","then","result","index","require$$0","length","hex","color","charAt","substr","colorRGB","parseInt","level","Error","applyFilter"],"mappings":"4ZAA+K,SAASA,YAAyBC,EAAEC,EAAEC,OAAOC,EAAEC,SAASC,cAAc,UAAU,OAAOF,EAAEG,MAAML,EAAEE,EAAEI,OAAOL,EAAEC,IAAIJ,GAAGA,EAAES,eAAe,WAAWT,EAAEU,QAAQV,EAAEW,YAAkBV,EAAEU,8BAAoC,SAAST,OAAOC,EAAES,OAAOP,SAASC,cAAc,UAAUF,EAAED,EAAEU,WAAW,MAAM,OAAOV,EAAEI,MAAML,EAAEK,MAAMJ,EAAEK,OAAON,EAAEM,OAAOJ,EAAEU,aAAaZ,EAAE,EAAE,GAAGC,EAAEY,aAAaJ,cAAoB,SAAST,OAAOC,EAAED,EAAEc,KAAKZ,EAAEF,EAAEe,UAAUC,EAAEhB,EAAEiB,QAAQC,EAAElB,EAAEmB,SAASC,EAAEtB,EAAE,6BAA6BI,EAAE,qTAAqTmB,EAAEtB,EAAEE,EAAEI,MAAMJ,EAAEK,QAAQgB,EAAED,EAAEV,WAAW,MAAMW,EAAEV,aAAaX,EAAE,EAAE,GAAGiB,EAAEA,GAAG,EAAE,IAAIK,EAAEC,KAAKC,MAAMJ,EAAEf,OAAOY,GAAG,OAAO,IAAIQ,QAAQ,SAASzB,OAAO,IAAIC,EAAE,EAAEF,OAAE,EAAOF,EAAE,EAAEA,EAAEoB,EAAEpB,IAAI,GAAGyB,EAAEzB,EAAE,IAAIoB,IAAIlB,EAAEqB,EAAEf,OAAOiB,EAAEzB,GAAG,IAAIC,EAAEuB,EAAEK,aAAa,EAAEJ,EAAEzB,EAAEuB,EAAEhB,MAAML,GAAG4B,EAAE5B,EAAEqB,EAAEhB,MAAM,EAAEe,EAAES,QAAQ9B,EAAED,EAAE8B,EAAEZ,GAAGc,KAAK,SAAS9B,KAAKY,aAAaZ,EAAE+B,OAAO,EAAER,EAAEvB,EAAEgC,SAAS9B,IAAIgB,GAAGjB,EAAEqB,EAAEK,aAAa,EAAE,EAAEN,EAAEhB,MAAMgB,EAAEf,gBAA9uC2B,qGCSzDlB,EAAY,oBAAGD,IAAAA,KAAMoB,IAAAA,OAAQjB,IAAAA,QAChCkB,EAC0B,MAA5BlB,EAAQmB,MAAMC,OAAO,GACfpB,EAAQmB,MAAME,OAAO,GACrBrB,EAAQmB,MACZG,EACCC,SAASL,EAAIG,OAAO,EAAG,GAAI,IAD5BC,EAECC,SAASL,EAAIG,OAAO,EAAG,GAAI,IAF5BC,EAGCC,SAASL,EAAIG,OAAO,EAAG,GAAI,IAGzBtB,EAAI,EAAGA,EAAIkB,EAAQlB,GAAK,IACxBA,KAAOF,EAAKE,GAAKuB,IAAetB,EAAQwB,MAAQ,OAChDzB,EAAI,KAAOF,EAAKE,EAAI,GAAKuB,IAAetB,EAAQwB,MAAQ,OACxDzB,EAAI,KAAOF,EAAKE,EAAI,GAAKuB,IAAetB,EAAQwB,MAAQ,YAG1D3B,2BAWI,wEAAgD,GAA5BA,IAAAA,KAAMG,IAAAA,QAASE,IAAAA,cACzCL,GAASG,GAAYA,EAAQmB,OAAUnB,EAAQwB,aAC1C,IAAIC,MAAM,0DAGbC,EAAY,CAAE7B,OAAMC,YAAWE,UAASE"}