{"version":3,"file":"lens-filter-noise.umd.js","sources":["../src/index.js"],"sourcesContent":["import { applyFilter } from 'lens-core';\n\n/**\n * Iterate over the array applying the noise transformation\n * @param {Array} data\n * @param {Number} length\n * @param {Object} options\n * @param {Number} [options.adjustment]\n */\nexport const transform = ({ data, length, options }) => {\n    const adjustment = Math.abs(options.adjustment) * 2.55;\n\n    const add = (original, increment) => {\n        const result = original + increment;\n\n        if (result > 255) {\n            return 255;\n        } else if (result < 0) {\n            return 0;\n        }\n\n        return result;\n    };\n\n    for (let i = 0; i < length; i += 4) {\n        // Calculate if should be negative or positive\n        const multiplier = Math.random() < 0.5 ? -1 : 1;\n\n        // Calculate random noise\n        const rand = multiplier * (Math.random() + adjustment);\n\n        data[i] = add(data[i], rand);\n        data[i + 1] = add(data[i + 1], rand);\n        data[i + 2] = add(data[i + 2], rand);\n    }\n\n    return data;\n};\n\n/**\n * @param {ImageData} data - data of a image extracted from a canvas\n * @param {Object} options - options to pass to the transformation function\n * @param {Number} [options.noise] - noise to apply in the transformation\n * @param {Number} nWorkers - number of workers\n * @returns {Promise}\n */\nexport default function noise({ data, options, nWorkers } = {}) {\n    if (!data || !options || !options.adjustment) {\n        throw new Error('lens-filter-noise:: invalid options provided');\n    }\n\n    return applyFilter({ data, transform, options, nWorkers });\n}\n"],"names":["transform","data","length","options","adjustment","Math","abs","add","original","increment","result","i","rand","random","nWorkers","Error","applyFilter"],"mappings":"oPASaA,EAAY,oBAAGC,IAAAA,KAAMC,IAAAA,OAAQC,IAAAA,QAChCC,EAA4C,KAA/BC,KAAKC,IAAIH,EAAQC,YAE9BG,EAAM,SAACC,EAAUC,OACbC,EAASF,EAAWC,SAEb,IAATC,EACO,IACAA,EAAS,EACT,EAGJA,GAGFC,EAAI,EAAGA,EAAIT,EAAQS,GAAK,EAAG,KAK1BC,GAHaP,KAAKQ,SAAW,IAAO,EAAI,IAGnBR,KAAKQ,SAAWT,KAEtCO,GAAKJ,EAAIN,EAAKU,GAAIC,KAClBD,EAAI,GAAKJ,EAAIN,EAAKU,EAAI,GAAIC,KAC1BD,EAAI,GAAKJ,EAAIN,EAAKU,EAAI,GAAIC,UAG5BX,2BAUI,wEAA6C,GAA5BA,IAAAA,KAAME,IAAAA,QAASW,IAAAA,aACtCb,IAASE,IAAYA,EAAQC,iBACxB,IAAIW,MAAM,uDAGbC,cAAY,CAAEf,OAAMD,YAAWG,UAASW"}