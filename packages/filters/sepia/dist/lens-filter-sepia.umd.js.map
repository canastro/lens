{"version":3,"file":"lens-filter-sepia.umd.js","sources":["../../../core/dist/lens-core.umd.js","../src/index.js"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(require(\"workerize\")):\"function\"==typeof define&&define.amd?define([\"workerize\"],e):e(t.workerize)}(this,function(a){\"use strict\";function o(t,e){var n=document.createElement(\"canvas\");return n.width=t,n.height=e,n}a=a&&a.hasOwnProperty(\"default\")?a.default:a,exports.getCanvas=o,exports.convertImageDataToCanvasURL=function(t){var e=window.document.createElement(\"canvas\"),n=e.getContext(\"2d\");return e.width=t.width,e.height=t.height,n.putImageData(t,0,0),e.toDataURL()},exports.applyFilter=function(t){var e=t.data,n=t.transform,i=t.options,d=t.nWorkers,h=a(\"\\n        var transform = \"+n+\";\\n\\n        export function execute(canvas, index, length, options) {\\n            canvas.data = transform({ \\n                data: canvas.data, \\n                length: length, \\n                options: options\\n            });\\n\\n            return { result: canvas, index: index };\\n        }\\n    \"),u=o(e.width,e.height),s=u.getContext(\"2d\");s.putImageData(e,0,0),d=d||1;var c=Math.floor(u.height/d);return new Promise(function(e){for(var n=0,t=void 0,a=0;a<d;a++){t=c,a+1===d&&(t=u.height-c*a);var o=s.getImageData(0,c*a,u.width,t),r=t*u.width*4;h.execute(o,a,r,i).then(function(t){s.putImageData(t.result,0,c*t.index),++n===d&&e(s.getImageData(0,0,u.width,u.height))})}})}});\n//# sourceMappingURL=lens-core.umd.js.map\n","import { applyFilter } from 'lens-core';\n\n/**\n * Iterate over the array applying the sepia transformation\n * @param {Object} data\n * @param {Number} length\n */\nexport const transform = ({ data, length }) => {\n    for (let i = 0; i < length; i += 4) {\n        const r = data[i];\n        const g = data[i + 1];\n        const b = data[i + 2];\n\n        data[i] = r * 0.393 + g * 0.769 + b * 0.189;\n        data[i + 1] = r * 0.349 + g * 0.686 + b * 0.168;\n        data[i + 2] = r * 0.272 + g * 0.534 + b * 0.131;\n    }\n\n    return data;\n};\n\n/**\n * @param {ImageData} data - data of a image extracted from a canvas\n * @param {Number} nWorkers - number of workers\n * @returns {Promise}\n */\nexport default function sepia({ data, nWorkers } = {}) {\n    if (!data) {\n        throw new Error('lens-filter-sepia:: invalid options provided');\n    }\n\n    return applyFilter({ data, transform, nWorkers });\n}\n"],"names":["a","o","t","e","n","document","createElement","width","height","hasOwnProperty","default","exports","window","getContext","putImageData","toDataURL","data","transform","i","options","d","nWorkers","h","u","s","c","Math","floor","Promise","getImageData","r","execute","then","result","index","require$$0","length","g","b","Error","applyFilter"],"mappings":"yZAA+K,SAASA,YAAyBC,EAAEC,EAAEC,OAAOC,EAAEC,SAASC,cAAc,UAAU,OAAOF,EAAEG,MAAML,EAAEE,EAAEI,OAAOL,EAAEC,IAAIJ,GAAGA,EAAES,eAAe,WAAWT,EAAEU,QAAQV,EAAEW,YAAkBV,EAAEU,8BAAoC,SAAST,OAAOC,EAAES,OAAOP,SAASC,cAAc,UAAUF,EAAED,EAAEU,WAAW,MAAM,OAAOV,EAAEI,MAAML,EAAEK,MAAMJ,EAAEK,OAAON,EAAEM,OAAOJ,EAAEU,aAAaZ,EAAE,EAAE,GAAGC,EAAEY,aAAaJ,cAAoB,SAAST,OAAOC,EAAED,EAAEc,KAAKZ,EAAEF,EAAEe,UAAUC,EAAEhB,EAAEiB,QAAQC,EAAElB,EAAEmB,SAASC,EAAEtB,EAAE,6BAA6BI,EAAE,qTAAqTmB,EAAEtB,EAAEE,EAAEI,MAAMJ,EAAEK,QAAQgB,EAAED,EAAEV,WAAW,MAAMW,EAAEV,aAAaX,EAAE,EAAE,GAAGiB,EAAEA,GAAG,EAAE,IAAIK,EAAEC,KAAKC,MAAMJ,EAAEf,OAAOY,GAAG,OAAO,IAAIQ,QAAQ,SAASzB,OAAO,IAAIC,EAAE,EAAEF,OAAE,EAAOF,EAAE,EAAEA,EAAEoB,EAAEpB,IAAI,GAAGyB,EAAEzB,EAAE,IAAIoB,IAAIlB,EAAEqB,EAAEf,OAAOiB,EAAEzB,GAAG,IAAIC,EAAEuB,EAAEK,aAAa,EAAEJ,EAAEzB,EAAEuB,EAAEhB,MAAML,GAAG4B,EAAE5B,EAAEqB,EAAEhB,MAAM,EAAEe,EAAES,QAAQ9B,EAAED,EAAE8B,EAAEZ,GAAGc,KAAK,SAAS9B,KAAKY,aAAaZ,EAAE+B,OAAO,EAAER,EAAEvB,EAAEgC,SAAS9B,IAAIgB,GAAGjB,EAAEqB,EAAEK,aAAa,EAAE,EAAEN,EAAEhB,MAAMgB,EAAEf,gBAA9uC2B,qGCOzDlB,EAAY,oBAAGD,IAAAA,KAAMoB,IAAAA,OACrBlB,EAAI,EAAGA,EAAIkB,EAAQlB,GAAK,EAAG,KAC1BY,EAAId,EAAKE,GACTmB,EAAIrB,EAAKE,EAAI,GACboB,EAAItB,EAAKE,EAAI,KAEdA,GAAS,KAAJY,EAAgB,KAAJO,EAAgB,KAAJC,IAC7BpB,EAAI,GAAS,KAAJY,EAAgB,KAAJO,EAAgB,KAAJC,IACjCpB,EAAI,GAAS,KAAJY,EAAgB,KAAJO,EAAgB,KAAJC,SAGnCtB,2BAQI,wEAAoC,GAAnBA,IAAAA,KAAMK,IAAAA,aAC7BL,QACK,IAAIuB,MAAM,uDAGbC,EAAY,CAAExB,OAAMC,YAAWI"}